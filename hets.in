#!/bin/bash

### author: Klaus Lüttich <luettich@tzi.de>

### a script that sets all HETS_*- and UNI*-variables according to the
### installation directory or according binaries found during the
### installation;
### it is post processed by some IzPack variables starting with %

if [ -d $INSTALL_PATH/lib/uDrawGraph ] ; then
    UDG_HOME=$INSTALL_PATH/lib/uDrawGraph
else if [ ! -d "$UDG_HOME" ] ; then
    UDG_HOME=$HOME/lib/uDrawGraph
    fi
fi
UNIDAVINCI=$UDG_HOME/bin/uDrawGraph

if [ -d $INSTALL_PATH/lib/Isabelle* ] ; then
    ISABELLE_HOME=$INSTALL_PATH/lib/Isabelle/Isabelle
else if [ ! -d "$ISABELLE_HOME" ]
     then ISABELLE_HOME=`dirname \`which isabelle\` 2> /dev/null`/../../
     fi
fi

if [ -z "$HETS_ISABELLE" ] ; then
    HETS_ISABELLE=$ISABELLE_HOME/Isabelle/bin/isabelle-interface
fi

if [ -d $INSTALL_PATH/CASL-lib ] ; then
    HETS_LIB=$INSTALL_PATH/CASL-lib
fi

HETS_OWL_PARSER=$INSTALL_PATH/lib/hets/
UNIWISH=/usr/bin/wish
HETS=$INSTALL_PATH/lib/hets/hets-$APP_VER

export HETS_LIB ISABELLE_HOME HETS_ISABELLE HETS_OWL_PARSER \
    UNIWISH UNIDAVINCI UDG_HOME

if [ -d $INSTALL_PATH/lib/SPASS* ] ; then
    SPASS_DIR=`ls $INSTALL_PATH/lib/ | grep SPASS`
    export PATH=$PATH:$INSTALL_PATH/lib/$SPASS_DIR
fi
export PATH=$PATH:$INSTALL_PATH/bin

exec $HETS $@
