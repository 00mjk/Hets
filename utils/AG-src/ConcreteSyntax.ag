{- UU_AG
 - Copyright:  S. Doaitse Swierstra, Arthur I. Baars and Andres Loeh
               Department of Computer Science
               Utrecht University
               P.O. Box 80.089
               3508 TB UTRECHT
               the Netherlands
               {swierstra,arthurb,andres}@cs.uu.nl -}
-- include type synonyms and Pattern datatype

imports
{
import CommonTypes
import Patterns
import UU_Pretty
import TokenDef(Pos)
import Expression
}

TYPE Elems     = [Elem]

TYPE Alts      = [Alt]

TYPE SemAlts   = [SemAlt]

TYPE SemDefs   = [SemDef]

DATA AG        | AG     elems  : Elems


DATA Elem      | Data   pos    : {Pos}
                        name   : {Nonterminal}
                        attrs  : Attrs
                        alts   : Alts
                        ext    : {Bool}

               | Type   pos    : {Pos}
                        name   : {Nonterminal}
                        arg    : {String}

               | Attr   pos    : {Pos}
                        names  : {[Nonterminal]}
                        attrs  : Attrs

               | Sem    pos    : {Pos}
                        name   : {Nonterminal}
                        attrs  : Attrs
                        rules  : SemAlts

               | Txt    pos    : {Pos}
                        name   : {Name}
                        lines  : {[String]}

DATA Attrs     | Attrs  pos    : {Pos}
                        inh,chn,syn : {AttrNames}


DATA Alt       | Alt    pos    : {Pos}
                        name   : {Constructor}
                        fields : {Fields}


DATA SemAlt    | SemAlt pos    : {Pos}
                        name   : {Constructor}
                        fields : SemDefs


DATA SemDef    | Def    pos    : {Pos}
                        field  : {Name}
                        attr   : {Name}
                        rhs    : {Expression}
                        owrt   : {Bool}
               | LocDef pos    : {Pos}
                        pat    : Pattern
                        rhs    : {Expression}
                        owrt   : {Bool}