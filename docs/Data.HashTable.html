<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--Rendered using the Haskell Html Library v0.2-->
<HTML
><HEAD
  ><TITLE
    >Data.HashTable</TITLE
    ><LINK HREF = "haddock.css" REL = "stylesheet" TYPE = "text/css"
    ></HEAD
  ><BODY
  ><TABLE CLASS = "vanilla" CELLSPACING = "0" CELLPADDING = "0"
    ><TR
      ><TD CLASS = "topbar"
	><TABLE CLASS = "vanilla" CELLSPACING = "0" CELLPADDING = "0"
	  ><TR
	    ><TD
	      ><IMG SRC = "haskell_icon.gif" WIDTH = "16" HEIGHT = "16" ALT = " "
		></TD
	      ><TD CLASS = "title"
	      >Haskell Hierarchical Libraries (base package)</TD
	      ><TD CLASS = "topbut"
	      ><A HREF = "index.html"
		>Contents</A
		></TD
	      ><TD CLASS = "topbut"
	      ><A HREF = "doc-index.html"
		>Index</A
		></TD
	      ></TR
	    ></TABLE
	  ></TD
	></TR
      ><TR
      ><TD CLASS = "modulebar"
	><TABLE CLASS = "vanilla" CELLSPACING = "0" CELLPADDING = "0"
	  ><TR
	    ><TD
	      ><FONT SIZE = "6"
		>Data.HashTable</FONT
		></TD
	      ><TD ALIGN = "right"
	      ><TABLE CLASS = "narrow" CELLSPACING = "0" CELLPADDING = "0"
		><TR
		  ><TD CLASS = "infohead"
		    >Portability</TD
		    ><TD CLASS = "infoval"
		    >  portable</TD
		    ></TR
		  ><TR
		  ><TD CLASS = "infohead"
		    >Stability</TD
		    ><TD CLASS = "infoval"
		    >  provisional</TD
		    ></TR
		  ><TR
		  ><TD CLASS = "infohead"
		    >Maintainer</TD
		    ><TD CLASS = "infoval"
		    >  libraries@haskell.org</TD
		    ></TR
		  ></TABLE
		></TD
	      ></TR
	    ></TABLE
	  ></TD
	></TR
      ><TR
      ><TD CLASS = "s15"
	></TD
	></TR
      ><TR
      ><TD
	><TABLE CLASS = "vanilla" CELLSPACING = "0" CELLPADDING = "0"
	  ><TR
	    ><TD CLASS = "section4"
	      ><B
		>Contents</B
		></TD
	      ></TR
	    ><TR
	    ><TD
	      ><DL
		><DT
		  ><A HREF = "#1"
		    >Basic hash table operations</A
		    ></DT
		  ><DT
		  ><A HREF = "#2"
		    >Converting to and from lists</A
		    ></DT
		  ><DT
		  ><A HREF = "#3"
		    >Hash functions</A
		    ></DT
		  ><DT
		  ><A HREF = "#4"
		    >Diagnostics</A
		    ></DT
		  ></DL
		></TD
	      ></TR
	    ></TABLE
	  ></TD
	></TR
      ><TR
      ><TD CLASS = "s15"
	></TD
	></TR
      ><TR
      ><TD CLASS = "section1"
	>Description</TD
	></TR
      ><TR
      ><TD CLASS = "doc"
	>An implementation of extensible hash tables, as described in
Per-Ake Larson, <EM
	  >Dynamic Hash Tables</EM
	  >, CACM 31(4), April 1988,
pp. 446--457.  The implementation is also derived from the one
in GHC's runtime system (<TT
	  >ghc/rts/Hash.{c,h}</TT
	  >).
</TD
	></TR
      ><TR
      ><TD CLASS = "s15"
	></TD
	></TR
      ><TR
      ><TD CLASS = "section1"
	>Synopsis</TD
	></TR
      ><TR
      ><TD CLASS = "s15"
	></TD
	></TR
      ><TR
      ><TD CLASS = "body"
	><TABLE CLASS = "vanilla" CELLSPACING = "0" CELLPADDING = "0"
	  ><TR
	    ><TD CLASS = "decl"
	      ><SPAN CLASS = "keyword"
		>data</SPAN
		> <A HREF = "#t%3AHashTable"
		>HashTable</A
		> key val</TD
	      ></TR
	    ><TR
	    ><TD CLASS = "s8"
	      ></TD
	      ></TR
	    ><TR
	    ><TD CLASS = "decl"
	      ><A HREF = "#v%3Anew"
		>new</A
		> :: (key -&gt; key -&gt; <A HREF = "GHC.Base.html#t%3ABool"
		>Bool</A
		>) -&gt; (key -&gt; <A HREF = "Data.Int.html#t%3AInt32"
		>Int32</A
		>) -&gt; <A HREF = "GHC.IOBase.html#t%3AIO"
		>IO</A
		> (<A HREF = "Data.HashTable.html#t%3AHashTable"
		>HashTable</A
		> key val)</TD
	      ></TR
	    ><TR
	    ><TD CLASS = "s8"
	      ></TD
	      ></TR
	    ><TR
	    ><TD CLASS = "decl"
	      ><A HREF = "#v%3Ainsert"
		>insert</A
		> :: <A HREF = "Data.HashTable.html#t%3AHashTable"
		>HashTable</A
		> key val -&gt; key -&gt; val -&gt; <A HREF = "GHC.IOBase.html#t%3AIO"
		>IO</A
		> ()</TD
	      ></TR
	    ><TR
	    ><TD CLASS = "s8"
	      ></TD
	      ></TR
	    ><TR
	    ><TD CLASS = "decl"
	      ><A HREF = "#v%3Adelete"
		>delete</A
		> :: <A HREF = "Data.HashTable.html#t%3AHashTable"
		>HashTable</A
		> key val -&gt; key -&gt; <A HREF = "GHC.IOBase.html#t%3AIO"
		>IO</A
		> ()</TD
	      ></TR
	    ><TR
	    ><TD CLASS = "s8"
	      ></TD
	      ></TR
	    ><TR
	    ><TD CLASS = "decl"
	      ><A HREF = "#v%3Alookup"
		>lookup</A
		> :: <A HREF = "Data.HashTable.html#t%3AHashTable"
		>HashTable</A
		> key val -&gt; key -&gt; <A HREF = "GHC.IOBase.html#t%3AIO"
		>IO</A
		> (<A HREF = "Data.Maybe.html#t%3AMaybe"
		>Maybe</A
		> val)</TD
	      ></TR
	    ><TR
	    ><TD CLASS = "s8"
	      ></TD
	      ></TR
	    ><TR
	    ><TD CLASS = "decl"
	      ><A HREF = "#v%3AfromList"
		>fromList</A
		> :: <A HREF = "GHC.Base.html#t%3AEq"
		>Eq</A
		> key =&gt; (key -&gt; <A HREF = "Data.Int.html#t%3AInt32"
		>Int32</A
		>) -&gt; [(key, val)] -&gt; <A HREF = "GHC.IOBase.html#t%3AIO"
		>IO</A
		> (<A HREF = "Data.HashTable.html#t%3AHashTable"
		>HashTable</A
		> key val)</TD
	      ></TR
	    ><TR
	    ><TD CLASS = "s8"
	      ></TD
	      ></TR
	    ><TR
	    ><TD CLASS = "decl"
	      ><A HREF = "#v%3AtoList"
		>toList</A
		> :: <A HREF = "Data.HashTable.html#t%3AHashTable"
		>HashTable</A
		> key val -&gt; <A HREF = "GHC.IOBase.html#t%3AIO"
		>IO</A
		> [(key, val)]</TD
	      ></TR
	    ><TR
	    ><TD CLASS = "s8"
	      ></TD
	      ></TR
	    ><TR
	    ><TD CLASS = "decl"
	      ><A HREF = "#v%3AhashInt"
		>hashInt</A
		> :: <A HREF = "GHC.Base.html#t%3AInt"
		>Int</A
		> -&gt; <A HREF = "Data.Int.html#t%3AInt32"
		>Int32</A
		></TD
	      ></TR
	    ><TR
	    ><TD CLASS = "s8"
	      ></TD
	      ></TR
	    ><TR
	    ><TD CLASS = "decl"
	      ><A HREF = "#v%3AhashString"
		>hashString</A
		> :: <A HREF = "GHC.Base.html#t%3AString"
		>String</A
		> -&gt; <A HREF = "Data.Int.html#t%3AInt32"
		>Int32</A
		></TD
	      ></TR
	    ><TR
	    ><TD CLASS = "s8"
	      ></TD
	      ></TR
	    ><TR
	    ><TD CLASS = "decl"
	      ><A HREF = "#v%3Aprime"
		>prime</A
		> :: <A HREF = "Data.Int.html#t%3AInt32"
		>Int32</A
		></TD
	      ></TR
	    ><TR
	    ><TD CLASS = "s8"
	      ></TD
	      ></TR
	    ><TR
	    ><TD CLASS = "decl"
	      ><A HREF = "#v%3AlongestChain"
		>longestChain</A
		> :: <A HREF = "Data.HashTable.html#t%3AHashTable"
		>HashTable</A
		> key val -&gt; <A HREF = "GHC.IOBase.html#t%3AIO"
		>IO</A
		> [(key, val)]</TD
	      ></TR
	    ></TABLE
	  ></TD
	></TR
      ><TR
      ><TD CLASS = "s15"
	></TD
	></TR
      ><TR
      ><TD CLASS = "s15"
	></TD
	></TR
      ><TR
      ><TD CLASS = "section1"
	><A NAME = "1"
	  >Basic hash table operations</A
	  ></TD
	></TR
      ><TR
      ><TD CLASS = "s15"
	></TD
	></TR
      ><TR
      ><TD CLASS = "decl"
	><SPAN CLASS = "keyword"
	  >data</SPAN
	  > <A NAME = "t%3AHashTable"
	  ></A
	  ><B
	  >HashTable</B
	  > key val</TD
	></TR
      ><TR
      ><TD CLASS = "body"
	><TABLE CLASS = "vanilla" CELLSPACING = "0" CELLPADDING = "0"
	  ><TR
	    ><TD CLASS = "ndoc"
	      ><P
		>A hash table mapping keys of type <TT
		  >key</TT
		  > to values of type <TT
		  >val</TT
		  >.
</P
		><P
		>The implementation will grow the hash table as necessary, trying to
maintain a reasonable average load per bucket in the table.
</P
		></TD
	      ></TR
	    ></TABLE
	  ></TD
	></TR
      ><TR
      ><TD CLASS = "s15"
	></TD
	></TR
      ><TR
      ><TD CLASS = "decl"
	><A NAME = "v%3Anew"
	  ></A
	  ><B
	  >new</B
	  ></TD
	></TR
      ><TR
      ><TD CLASS = "body"
	><TABLE CLASS = "vanilla" CELLSPACING = "0" CELLPADDING = "0"
	  ><TR
	    ><TD CLASS = "arg"
	      >:: (key -&gt; key -&gt; <A HREF = "GHC.Base.html#t%3ABool"
		>Bool</A
		>)</TD
	      ><TD CLASS = "rdoc"
	      ><TT
		>eq</TT
		>: An equality comparison on keys</TD
	      ></TR
	    ><TR
	    ><TD CLASS = "arg"
	      >-&gt; (key -&gt; <A HREF = "Data.Int.html#t%3AInt32"
		>Int32</A
		>)</TD
	      ><TD CLASS = "rdoc"
	      ><TT
		>hash</TT
		>: A hash function on keys</TD
	      ></TR
	    ><TR
	    ><TD CLASS = "arg"
	      >-&gt; <A HREF = "GHC.IOBase.html#t%3AIO"
		>IO</A
		> (<A HREF = "Data.HashTable.html#t%3AHashTable"
		>HashTable</A
		> key val)</TD
	      ><TD CLASS = "rdoc"
	      >Returns: an empty hash table</TD
	      ></TR
	    ><TR
	    ><TD CLASS = "ndoc" COLSPAN = "2"
	      ><P
		>Creates a new hash table.  The following property should hold for the <TT
		  >eq</TT
		  >
and <TT
		  >hash</TT
		  > functions passed to <TT
		  ><A HREF = "Data.HashTable.html#v%3Anew"
		    >new</A
		    ></TT
		  >:
</P
		><PRE
		>   eq A B  =&gt;  hash A == hash B
</PRE
		></TD
	      ></TR
	    ></TABLE
	  ></TD
	></TR
      ><TR
      ><TD CLASS = "s15"
	></TD
	></TR
      ><TR
      ><TD CLASS = "decl"
	><A NAME = "v%3Ainsert"
	  ></A
	  ><B
	  >insert</B
	  > :: <A HREF = "Data.HashTable.html#t%3AHashTable"
	  >HashTable</A
	  > key val -&gt; key -&gt; val -&gt; <A HREF = "GHC.IOBase.html#t%3AIO"
	  >IO</A
	  > ()</TD
	></TR
      ><TR
      ><TD CLASS = "doc"
	>Inserts an key/value mapping into the hash table.</TD
	></TR
      ><TR
      ><TD CLASS = "s15"
	></TD
	></TR
      ><TR
      ><TD CLASS = "decl"
	><A NAME = "v%3Adelete"
	  ></A
	  ><B
	  >delete</B
	  > :: <A HREF = "Data.HashTable.html#t%3AHashTable"
	  >HashTable</A
	  > key val -&gt; key -&gt; <A HREF = "GHC.IOBase.html#t%3AIO"
	  >IO</A
	  > ()</TD
	></TR
      ><TR
      ><TD CLASS = "doc"
	>Remove an entry from the hash table.</TD
	></TR
      ><TR
      ><TD CLASS = "s15"
	></TD
	></TR
      ><TR
      ><TD CLASS = "decl"
	><A NAME = "v%3Alookup"
	  ></A
	  ><B
	  >lookup</B
	  > :: <A HREF = "Data.HashTable.html#t%3AHashTable"
	  >HashTable</A
	  > key val -&gt; key -&gt; <A HREF = "GHC.IOBase.html#t%3AIO"
	  >IO</A
	  > (<A HREF = "Data.Maybe.html#t%3AMaybe"
	  >Maybe</A
	  > val)</TD
	></TR
      ><TR
      ><TD CLASS = "doc"
	>Looks up the value of a key in the hash table.</TD
	></TR
      ><TR
      ><TD CLASS = "s15"
	></TD
	></TR
      ><TR
      ><TD CLASS = "section1"
	><A NAME = "2"
	  >Converting to and from lists</A
	  ></TD
	></TR
      ><TR
      ><TD CLASS = "s15"
	></TD
	></TR
      ><TR
      ><TD CLASS = "decl"
	><A NAME = "v%3AfromList"
	  ></A
	  ><B
	  >fromList</B
	  > :: <A HREF = "GHC.Base.html#t%3AEq"
	  >Eq</A
	  > key =&gt; (key -&gt; <A HREF = "Data.Int.html#t%3AInt32"
	  >Int32</A
	  >) -&gt; [(key, val)] -&gt; <A HREF = "GHC.IOBase.html#t%3AIO"
	  >IO</A
	  > (<A HREF = "Data.HashTable.html#t%3AHashTable"
	  >HashTable</A
	  > key val)</TD
	></TR
      ><TR
      ><TD CLASS = "doc"
	>Convert a list of key/value pairs into a hash table.  Equality on keys
is taken from the Eq instance for the key type.
</TD
	></TR
      ><TR
      ><TD CLASS = "s15"
	></TD
	></TR
      ><TR
      ><TD CLASS = "decl"
	><A NAME = "v%3AtoList"
	  ></A
	  ><B
	  >toList</B
	  > :: <A HREF = "Data.HashTable.html#t%3AHashTable"
	  >HashTable</A
	  > key val -&gt; <A HREF = "GHC.IOBase.html#t%3AIO"
	  >IO</A
	  > [(key, val)]</TD
	></TR
      ><TR
      ><TD CLASS = "doc"
	>Converts a hash table to a list of key/value pairs.
</TD
	></TR
      ><TR
      ><TD CLASS = "s15"
	></TD
	></TR
      ><TR
      ><TD CLASS = "section1"
	><A NAME = "3"
	  >Hash functions</A
	  ></TD
	></TR
      ><TR
      ><TD CLASS = "s15"
	></TD
	></TR
      ><TR
      ><TD CLASS = "doc"
	><P
	  >This implementation of hash tables uses the low-order <EM
	    >n</EM
	    > bits of the hash
value for a key, where <EM
	    >n</EM
	    > varies as the hash table grows.  A good hash
function therefore will give an even distribution regardless of <EM
	    >n</EM
	    >.
</P
	  ><P
	  >If your keyspace is integrals such that the low-order bits between
keys are highly variable, then you could get away with using <TT
	    ><A HREF = "GHC.Base.html#v%3Aid"
	      >id</A
	      ></TT
	    >
as the hash function.
</P
	  ><P
	  >We provide some sample hash functions for <TT
	    ><A HREF = "GHC.Base.html#t%3AInt"
	      >Int</A
	      ></TT
	    > and <TT
	    ><A HREF = "GHC.Base.html#t%3AString"
	      >String</A
	      ></TT
	    > below.</P
	  ></TD
	></TR
      ><TR
      ><TD CLASS = "s15"
	></TD
	></TR
      ><TR
      ><TD CLASS = "decl"
	><A NAME = "v%3AhashInt"
	  ></A
	  ><B
	  >hashInt</B
	  > :: <A HREF = "GHC.Base.html#t%3AInt"
	  >Int</A
	  > -&gt; <A HREF = "Data.Int.html#t%3AInt32"
	  >Int32</A
	  ></TD
	></TR
      ><TR
      ><TD CLASS = "doc"
	>A sample hash function for <TT
	  ><A HREF = "GHC.Base.html#t%3AInt"
	    >Int</A
	    ></TT
	  >, implemented as simply <TT
	  >(x <TT
	    ><A HREF = "GHC.Real.html#v%3Amod"
	      >mod</A
	      ></TT
	    > P)</TT
	  >
where P is a suitable prime (currently 1500007).  Should give
reasonable results for most distributions of <TT
	  ><A HREF = "GHC.Base.html#t%3AInt"
	    >Int</A
	    ></TT
	  > values, except
when the keys are all multiples of the prime!
</TD
	></TR
      ><TR
      ><TD CLASS = "s15"
	></TD
	></TR
      ><TR
      ><TD CLASS = "decl"
	><A NAME = "v%3AhashString"
	  ></A
	  ><B
	  >hashString</B
	  > :: <A HREF = "GHC.Base.html#t%3AString"
	  >String</A
	  > -&gt; <A HREF = "Data.Int.html#t%3AInt32"
	  >Int32</A
	  ></TD
	></TR
      ><TR
      ><TD CLASS = "doc"
	><P
	  >A sample hash function for <TT
	    ><A HREF = "GHC.Base.html#t%3AString"
	      >String</A
	      ></TT
	    >s.  The implementation is:
</P
	  ><PRE
	  >    hashString = fromIntegral . foldr f 0
      where f c m = ord c + (m * 128) `rem` 1500007
</PRE
	  ><P
	  >which seems to give reasonable results.
</P
	  ></TD
	></TR
      ><TR
      ><TD CLASS = "s15"
	></TD
	></TR
      ><TR
      ><TD CLASS = "decl"
	><A NAME = "v%3Aprime"
	  ></A
	  ><B
	  >prime</B
	  > :: <A HREF = "Data.Int.html#t%3AInt32"
	  >Int32</A
	  ></TD
	></TR
      ><TR
      ><TD CLASS = "doc"
	>A prime larger than the maximum hash table size</TD
	></TR
      ><TR
      ><TD CLASS = "s15"
	></TD
	></TR
      ><TR
      ><TD CLASS = "section1"
	><A NAME = "4"
	  >Diagnostics</A
	  ></TD
	></TR
      ><TR
      ><TD CLASS = "s15"
	></TD
	></TR
      ><TR
      ><TD CLASS = "decl"
	><A NAME = "v%3AlongestChain"
	  ></A
	  ><B
	  >longestChain</B
	  > :: <A HREF = "Data.HashTable.html#t%3AHashTable"
	  >HashTable</A
	  > key val -&gt; <A HREF = "GHC.IOBase.html#t%3AIO"
	  >IO</A
	  > [(key, val)]</TD
	></TR
      ><TR
      ><TD CLASS = "doc"
	>This function is useful for determining whether your hash function
is working well for your data set.  It returns the longest chain
of key/value pairs in the hash table for which all the keys hash to
the same bucket.  If this chain is particularly long (say, longer
than 10 elements), then it might be a good idea to try a different
hash function.
</TD
	></TR
      ><TR
      ><TD CLASS = "s15"
	></TD
	></TR
      ><TR
      ><TD CLASS = "botbar"
	>Produced by <A HREF = "http://www.haskell.org/haddock/"
	  >Haddock</A
	  > version 0.6</TD
	></TR
      ></TABLE
    ></BODY
  ></HTML
>
