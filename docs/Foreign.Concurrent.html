<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--Rendered using the Haskell Html Library v0.2-->
<HTML
><HEAD
  ><TITLE
    >Foreign.Concurrent</TITLE
    ><LINK HREF = "haddock.css" REL = "stylesheet" TYPE = "text/css"
    ></HEAD
  ><BODY
  ><TABLE CLASS = "vanilla" CELLSPACING = "0" CELLPADDING = "0"
    ><TR
      ><TD CLASS = "topbar"
	><TABLE CLASS = "vanilla" CELLSPACING = "0" CELLPADDING = "0"
	  ><TR
	    ><TD
	      ><IMG SRC = "haskell_icon.gif" WIDTH = "16" HEIGHT = "16" ALT = " "
		></TD
	      ><TD CLASS = "title"
	      >Haskell Hierarchical Libraries (base package)</TD
	      ><TD CLASS = "topbut"
	      ><A HREF = "index.html"
		>Contents</A
		></TD
	      ><TD CLASS = "topbut"
	      ><A HREF = "doc-index.html"
		>Index</A
		></TD
	      ></TR
	    ></TABLE
	  ></TD
	></TR
      ><TR
      ><TD CLASS = "modulebar"
	><TABLE CLASS = "vanilla" CELLSPACING = "0" CELLPADDING = "0"
	  ><TR
	    ><TD
	      ><FONT SIZE = "6"
		>Foreign.Concurrent</FONT
		></TD
	      ><TD ALIGN = "right"
	      ><TABLE CLASS = "narrow" CELLSPACING = "0" CELLPADDING = "0"
		><TR
		  ><TD CLASS = "infohead"
		    >Portability</TD
		    ><TD CLASS = "infoval"
		    >  non-portable (requires concurrency)</TD
		    ></TR
		  ><TR
		  ><TD CLASS = "infohead"
		    >Stability</TD
		    ><TD CLASS = "infoval"
		    >  provisional</TD
		    ></TR
		  ><TR
		  ><TD CLASS = "infohead"
		    >Maintainer</TD
		    ><TD CLASS = "infoval"
		    >  ffi@haskell.org</TD
		    ></TR
		  ></TABLE
		></TD
	      ></TR
	    ></TABLE
	  ></TD
	></TR
      ><TR
      ><TD CLASS = "s15"
	></TD
	></TR
      ><TR
      ><TD
	><TABLE CLASS = "vanilla" CELLSPACING = "0" CELLPADDING = "0"
	  ><TR
	    ><TD CLASS = "section4"
	      ><B
		>Contents</B
		></TD
	      ></TR
	    ><TR
	    ><TD
	      ><DL
		><DT
		  ><A HREF = "#1"
		    >Concurrency-based <TT
		      ><A HREF = "GHC.ForeignPtr.html#t%3AForeignPtr"
			>ForeignPtr</A
			></TT
		      > operations</A
		    ></DT
		  ></DL
		></TD
	      ></TR
	    ></TABLE
	  ></TD
	></TR
      ><TR
      ><TD CLASS = "s15"
	></TD
	></TR
      ><TR
      ><TD CLASS = "section1"
	>Description</TD
	></TR
      ><TR
      ><TD CLASS = "doc"
	>FFI datatypes and operations that use or require concurrency (GHC only).
</TD
	></TR
      ><TR
      ><TD CLASS = "s15"
	></TD
	></TR
      ><TR
      ><TD CLASS = "section1"
	>Synopsis</TD
	></TR
      ><TR
      ><TD CLASS = "s15"
	></TD
	></TR
      ><TR
      ><TD CLASS = "body"
	><TABLE CLASS = "vanilla" CELLSPACING = "0" CELLPADDING = "0"
	  ><TR
	    ><TD CLASS = "decl"
	      ><A HREF = "#v%3AnewForeignPtr"
		>newForeignPtr</A
		> :: <A HREF = "GHC.Ptr.html#t%3APtr"
		>Ptr</A
		> a -&gt; <A HREF = "GHC.IOBase.html#t%3AIO"
		>IO</A
		> () -&gt; <A HREF = "GHC.IOBase.html#t%3AIO"
		>IO</A
		> (<A HREF = "GHC.ForeignPtr.html#t%3AForeignPtr"
		>ForeignPtr</A
		> a)</TD
	      ></TR
	    ><TR
	    ><TD CLASS = "s8"
	      ></TD
	      ></TR
	    ><TR
	    ><TD CLASS = "decl"
	      ><A HREF = "#v%3AaddForeignPtrFinalizer"
		>addForeignPtrFinalizer</A
		> :: <A HREF = "GHC.ForeignPtr.html#t%3AForeignPtr"
		>ForeignPtr</A
		> a -&gt; <A HREF = "GHC.IOBase.html#t%3AIO"
		>IO</A
		> () -&gt; <A HREF = "GHC.IOBase.html#t%3AIO"
		>IO</A
		> ()</TD
	      ></TR
	    ></TABLE
	  ></TD
	></TR
      ><TR
      ><TD CLASS = "s15"
	></TD
	></TR
      ><TR
      ><TD CLASS = "s15"
	></TD
	></TR
      ><TR
      ><TD CLASS = "section1"
	><A NAME = "1"
	  >Concurrency-based <TT
	    ><A HREF = "GHC.ForeignPtr.html#t%3AForeignPtr"
	      >ForeignPtr</A
	      ></TT
	    > operations</A
	  ></TD
	></TR
      ><TR
      ><TD CLASS = "s15"
	></TD
	></TR
      ><TR
      ><TD CLASS = "doc"
	>These functions generalize their namesakes in the portable
<A HREF = "Foreign.ForeignPtr.html"
	  >Foreign.ForeignPtr</A
	  > module by allowing arbitrary <TT
	  ><A HREF = "GHC.IOBase.html#t%3AIO"
	    >IO</A
	    ></TT
	  > actions
as finalizers.  These finalizers necessarily run in a separate
thread, cf. <EM
	  >Destructors, Finalizers and Synchronization</EM
	  >,
by Hans Boehm, <EM
	  >POPL</EM
	  >, 2003.</TD
	></TR
      ><TR
      ><TD CLASS = "s15"
	></TD
	></TR
      ><TR
      ><TD CLASS = "decl"
	><A NAME = "v%3AnewForeignPtr"
	  ></A
	  ><B
	  >newForeignPtr</B
	  > :: <A HREF = "GHC.Ptr.html#t%3APtr"
	  >Ptr</A
	  > a -&gt; <A HREF = "GHC.IOBase.html#t%3AIO"
	  >IO</A
	  > () -&gt; <A HREF = "GHC.IOBase.html#t%3AIO"
	  >IO</A
	  > (<A HREF = "GHC.ForeignPtr.html#t%3AForeignPtr"
	  >ForeignPtr</A
	  > a)</TD
	></TR
      ><TR
      ><TD CLASS = "doc"
	>Turns a plain memory reference into a foreign object by associating
a finalizer - given by the monadic operation - with the reference.
The finalizer will be executed after the last reference to the
foreign object is dropped.  Note that there is no guarantee on how
soon the finalizer is executed after the last reference was dropped;
this depends on the details of the Haskell storage manager.  The only
guarantee is that the finalizer runs before the program terminates.</TD
	></TR
      ><TR
      ><TD CLASS = "s15"
	></TD
	></TR
      ><TR
      ><TD CLASS = "decl"
	><A NAME = "v%3AaddForeignPtrFinalizer"
	  ></A
	  ><B
	  >addForeignPtrFinalizer</B
	  > :: <A HREF = "GHC.ForeignPtr.html#t%3AForeignPtr"
	  >ForeignPtr</A
	  > a -&gt; <A HREF = "GHC.IOBase.html#t%3AIO"
	  >IO</A
	  > () -&gt; <A HREF = "GHC.IOBase.html#t%3AIO"
	  >IO</A
	  > ()</TD
	></TR
      ><TR
      ><TD CLASS = "doc"
	>This function adds a finalizer to the given <TT
	  ><A HREF = "GHC.ForeignPtr.html#t%3AForeignPtr"
	    >ForeignPtr</A
	    ></TT
	  >.
The finalizer will run after the last reference to the foreign object
is dropped, but <EM
	  >before</EM
	  > all previously registered finalizers for the
same object.</TD
	></TR
      ><TR
      ><TD CLASS = "s15"
	></TD
	></TR
      ><TR
      ><TD CLASS = "botbar"
	>Produced by <A HREF = "http://www.haskell.org/haddock/"
	  >Haddock</A
	  > version 0.6</TD
	></TR
      ></TABLE
    ></BODY
  ></HTML
>
